C51 COMPILER V9.01   PUTCHAR                                                               11/23/2016 11:58:15 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE PUTCHAR
OBJECT MODULE PLACED IN .\ObjFile\PUTCHAR.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE SrcFile\Lib\PUTCHAR.c LARGE BROWSE INCDIR(.\SrcFile\StartUp\CPU;.\SrcFile\F
                    -rame\Inc;.\SrcFile\Func\Inc;.\SrcFile\Lib;.\SrcFile\App\Inc) DEFINE(_DEV_BOARD_,_FPGA_DEMO_EN_) DEBUG OBJECTEXTEND PRINT
                    -(.\LstFile\PUTCHAR.lst) OBJECT(.\ObjFile\PUTCHAR.obj)

line level    source

   1          /********************************************************************
   2                                    Nationz Co.,Ltd
   3                          Copyright (c) 2009£­2015 All Rights Reserved 
   4          *********************************************************************
   5          File:          
   6          History£º
   7          Version                      Author                     Date
   8          V0.1                             nationz               2013-3-18
   9          
  10          Description:     
  11              Putchar Source Code File;
  12          Function list:
  13              void putchar(char x);
  14          Special statement:
  15          ********************************************************************/
  16          
  17          #include "TypeDefine.h"
  18          
  19          #define _HARDWAREPRINT_
  20          
  21          /******************************************************************** 
  22          Function name:          putchar
  23          Input parameters:
  24                  x ,output char;
  25          Return:
  26                  void;   
  27          Function: 
  28                  Output char x via uart;
  29          ********************************************************************/
  30          extern void vUartPutByte(UINT8 Byte);
  31          
  32          #ifdef _HARDWAREPRINT_
  33          void putchar(unsigned char x)
  34          {
  35   1          vUartPutByte(x);
  36   1      }
  37          
  38          #else
              UINT8 uart_delay_time = 0xa3;
              void delay_xxx(unsigned char Count) 
              {
                  while(Count--);
              }
              void putchar(unsigned char x)
              {
                  
                      unsigned char i;
                      IOMP0DOUT|=0x02;        
                      delay_xxx(uart_delay_time);
                      IOMP0DOUT&=0xfd;        
                      delay_xxx(uart_delay_time);
                      for(i=0;i<8;i++)
                      {
C51 COMPILER V9.01   PUTCHAR                                                               11/23/2016 11:58:15 PAGE 2   

                          if(x&0x01)
                              {
                                      IOMP0DOUT|=0x02;                        
                              }
                              else
                              {
                                      IOMP0DOUT&=0xfd;                        
                              }
                              delay_xxx(uart_delay_time);
                              x >>= 1;        
                      }
                      IOMP0DOUT|=0x02;        
                      delay_xxx(uart_delay_time);
                      
              }
              #endif
  70          
  71          /******************************************************************/
  72          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =      3    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
